<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:image" content="http://nekomimi.tilde.team/res/misc/nIRC.png">
    <meta property="og:thumbnail" content="http://nekomimi.tilde.team/res/misc/nIRC.png">
    <meta property="og:title" content="nIRC Bot Framework">
    <meta property="og:site_name" content="nIRC Documentations for creating bots on IRC">
    <meta property="description" content="nIRC is a framework made in python that brings you an asynchronous, batteries-included IRC bot library, The framework abstracts raw IRC protocol handling, offering an elegant, decorator-based interface for defining commands and reacting to server events.">
    <meta property="og:description" content="nIRC is a framework made in python that brings you an asynchronous, batteries-included IRC bot library, The framework abstracts raw IRC protocol handling, offering an elegant, decorator-based interface for defining commands and reacting to server events.">
    <title>nIRC Bot Framework Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        .active-nav {
            color: #0284c7;
            font-weight: 600;
            border-left-color: #0284c7;
        }
        .nav-link {
            border-left: 2px solid transparent;
            transition: all 0.2s ease-in-out;
        }
        .nav-link:hover {
            color: #0369a1;
            border-left-color: #7dd3fc;
        }
        .code-block {
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #475569;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.2s ease-in-out;
            z-index: 10; /* Ensure button is above code */
        }
        .code-block:hover .copy-btn {
            opacity: 1;
        }

        /* No custom syntax highlighting classes included, as requested */

    </style>
</head>
<body class="bg-stone-50 text-stone-800">
    <div class="flex flex-col md:flex-row">
        <aside class="w-full md:w-64 lg:w-72 bg-stone-100 border-r border-stone-200 md:h-screen md:sticky md:top-0 p-6 md:p-8">
            <img src="http://nekomimi.tilde.team/res/misc/nIRCBanner.png" style="max-height: 80px;">
            <h1 class="text-xl font-bold text-stone-900">nIRC Bot Framework</h1>
            <nav id="main-nav" class="mt-8 space-y-2">
                <a href="#introduction" class="block py-2 px-3 text-stone-600 nav-link">Introduction</a>
                <a href="#configuration" class="block py-2 px-3 text-stone-600 nav-link">Core Configuration</a>
                <div>
                    <a href="#abstractions" class="block py-2 px-3 text-stone-600 nav-link font-medium">Core Abstractions</a>
                    <div class="ml-4 mt-2 space-y-2 border-l-2 border-stone-200">
                        <a href="#bot-class" class="block py-1.5 px-3 text-sm text-stone-500 nav-link">Bot Class</a>
                        <a href="#irc-connection-class" class="block py-1.5 px-3 text-sm text-stone-500 nav-link">IRCConnection</a>
                        <a href="#logger-class" class="block py-1.5 px-3 text-sm text-stone-500 nav-link">Logger Class</a>
                        <a href="#context-class" class="block py-1.5 px-3 text-sm text-stone-500 nav-link">Context Class</a>
                        <a href="#member-class" class="block py-1.5 px-3 text-sm text-stone-500 nav-link">Member Class</a>
                        <a href="#channel-class" class="block py-1.5 px-3 text-sm text-stone-500 nav-link">Channel Class</a>
                        <a href="#task-runner" class="block py-1.5 px-3 text-sm text-stone-500 nav-link">Task Runner</a>
                    </div>
                </div>
                <a href="#example-script" class="block py-2 px-3 text-stone-600 nav-link">Example Script</a>
            </nav>
        </aside>

        <main class="flex-1 p-6 md:p-10 lg:p-12">
            <div class="max-w-4xl mx-auto space-y-16">
                <section id="introduction">
                    <h2 class="text-3xl font-bold text-stone-900 border-b pb-4">Framework Documentation</h2>
                    <p class="mt-6 text-lg text-stone-700">
                        This document provides an overview and a functional guide for the nIRC Bot Framework. It is designed for high-performance, non-blocking interaction with IRC servers. The framework abstracts raw IRC protocol handling, offering an elegant, decorator-based interface for defining commands and reacting to server events.
                    </p>
                </section>

                <section id="configuration">
                    <h2 class="text-2xl font-bold text-stone-900">Core Configuration</h2>
                    <p class="mt-4 text-stone-600">The following constants manage the bot's identity and connection parameters. In a production environment, these should be loaded from secure environment variables or a configuration file.</p>
                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Constant</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                    <th class="p-4 font-semibold text-sm">Example</th>
                                </tr>
                            </thead>
                            <tbody class="align-baseline">
                                <tr class="border-b">
                                    <td class="p-4 font-mono text-sm bg-stone-50">BOT_NICK</td>
                                    <td class="p-4 font-mono text-sm">str</td>
                                    <td class="p-4 text-sm text-stone-600">The nickname the bot will use on the server.</td>
                                    <td class="p-4 font-mono text-sm text-sky-700">"ServiceBot"</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-4 font-mono text-sm bg-stone-50">BOT_USERNAME</td>
                                    <td class="p-4 font-mono text-sm">str</td>
                                    <td class="p-4 text-sm text-stone-600">The bot's ident/username.</td>
                                    <td class="p-4 font-mono text-sm text-sky-700">"svc_agent"</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-4 font-mono text-sm bg-stone-50">BOT_REALNAME</td>
                                    <td class="p-4 font-mono text-sm">str</td>
                                    <td class="p-4 text-sm text-stone-600">The bot's "real name" shown in WHOIS.</td>
                                    <td class="p-4 font-mono text-sm text-sky-700">"IRC Service Agent v1.0"</td>
                                </tr>
                                 <tr class="border-b">
                                    <td class="p-4 font-mono text-sm bg-stone-50">BOT_PASSWORD</td>
                                    <td class="p-4 font-mono text-sm">Optional[str]</td>
                                    <td class="p-4 text-sm text-stone-600">Password for NickServ identification. Set to <code>None</code> if not required.</td>
                                    <td class="p-4 font-mono text-sm text-sky-700">"MySecurePass"</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-4 font-mono text-sm bg-stone-50">COMMAND_PREFIX</td>
                                    <td class="p-4 font-mono text-sm">str</td>
                                    <td class="p-4 text-sm text-stone-600">The character(s) used to trigger bot commands.</td>
                                    <td class="p-4 font-mono text-sm text-sky-700">"!"</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-mono text-sm bg-stone-50">CHANNELS_TO_JOIN</td>
                                    <td class="p-4 font-mono text-sm">Dict[str, Optional[str]]</td>
                                    <td class="p-4 text-sm text-stone-600">Map of channels to join on connection with optional keys.</td>
                                    <td class="p-4 font-mono text-sm text-sky-700">{"#public": None, "#admin": "key123"}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <section id="abstractions">
                    <h2 class="text-2xl font-bold text-stone-900">Core Abstractions</h2>
                    <p class="mt-4 text-stone-600">The framework is built on a few key classes that abstract away the complexity of the IRC protocol, allowing you to focus on building features.</p>
                </section>

                <section id="bot-class" class="pt-2 -mt-2">
                     <h3 class="text-xl font-semibold text-stone-800">The <code>Bot</code> Class (The Engine)</h3>
                     <p class="mt-3 text-stone-600">The main class responsible for managing the connection, registering handlers, dispatching events, and managing background tasks.</p>

                     <h4 class="mt-8 mb-4 font-semibold text-stone-800">Constructor Arguments (<code>__init__</code>)</h4>
                     <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Argument</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                    <th class="p-4 font-semibold text-sm">Required</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">prefix</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The command prefix (e.g., <code>!</code> or <code>.</code>).</td><td class="p-4 font-mono text-sm text-green-700">Yes</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">connection</td><td class="p-4 font-mono text-sm">IRCConnection</td><td class="p-4 text-sm text-stone-600">The pre-configured <code>IRCConnection</code> object used for I/O.</td><td class="p-4 font-mono text-sm text-green-700">Yes</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">nick</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The bot's primary nickname.</td><td class="p-4 font-mono text-sm text-green-700">Yes</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">username</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The bot's username (IDENT).</td><td class="p-4 font-mono text-sm text-green-700">Yes</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">realname</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The bot's real name (GECOS).</td><td class="p-4 font-mono text-sm text-green-700">Yes</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">password</td><td class="p-4 font-mono text-sm">Optional[str]</td><td class="p-4 text-sm text-stone-600">Password for NickServ identification, if required. (Default: <code>None</code>)</td><td class="p-4 font-mono text-sm text-red-700">No</td></tr>
                            </tbody>
                        </table>
                    </div>

                     <h4 class="mt-8 mb-4 font-semibold text-stone-800">General Methods</h4>
                     <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Method / Property</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">start(channel_map)</td><td class="p-4 font-mono text-sm">async method</td><td class="p-4 text-sm text-stone-600">Establishes the connection, performs initial setup, and enters the main event loop.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">send_message(...)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Sends a raw PRIVMSG to a specified channel or user.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">send_raw(message)</td><td class="p-4 font-mono text-sm">async method</td><td class="p-4 text-sm text-stone-600">Sends a raw IRC protocol command directly to the server.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">start_task(task_func, *args)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Starts a background task defined with <code>@bot.task</code>.</td></tr>
                             </tbody>
                        </table>
                    </div>
                    <h4 class="mt-8 mb-4 font-semibold text-stone-800">Decorators for Event Binding</h4>
                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Decorator</th>
                                    <th class="p-4 font-semibold text-sm">Contextual Event</th>
                                    <th class="p-4 font-semibold text-sm">Context Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">@bot.command(name)</td><td class="p-4 text-sm">Standard Command</td><td class="p-4 font-mono text-sm"><code>Context</code></td><td class="p-4 text-sm text-stone-600">Binds a function to a command triggered via <code>COMMAND_PREFIX</code> (e.g., <code>!help</code>).</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">@bot.on_ready()</td><td class="p-4 text-sm">Connection Ready</td><td class="p-4 font-mono text-sm"><code>Bot</code> instance</td><td class="p-4 text-sm text-stone-600">Fires **once** after successful IRC registration (numeric <code>001</code>/<code>376</code>). Ideal for initialization.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">@bot.on_raw()</td><td class="p-4 text-sm">All Raw Lines</td><td class="p-4 font-mono text-sm"><code>Context</code></td><td class="p-4 text-sm text-stone-600">Fires for every single, unfiltered line received from the IRC server. Use <code>ctx.full_line</code>.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">@bot.on_message()</td><td class="p-4 text-sm">Any Channel Message</td><td class="p-4 font-mono text-sm"><code>Context</code></td><td class="p-4 text-sm text-stone-600">Fires on all <code>PRIVMSG</code> events that are **not** commands. Essential for keyword checks.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">@bot.on_join()</td><td class="p-4 text-sm">User joins channel</td><td class="p-4 font-mono text-sm"><code>Context</code></td><td class="p-4 text-sm text-stone-600">Binds a function to the JOIN IRC event.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">@bot.on_leave()</td><td class="p-4 text-sm">User parts or quits</td><td class="p-4 font-mono text-sm"><code>Context</code></td><td class="p-4 text-sm text-stone-600">Binds a function to the PART or QUIT IRC event.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">@bot.prefix_command(prefix)</td><td class="p-4 text-sm">Prefixless Command</td><td class="p-4 font-mono text-sm"><code>Context</code></td><td class="p-4 text-sm text-stone-600">Binds to a message starting with <code>prefix</code> (e.g., <code>&gt;</code>).</td></tr>
                             </tbody>
                        </table>
                    </div>
                </section>

                <section id="irc-connection-class" class="pt-2 -mt-2">
                    <h3 class="text-xl font-semibold text-stone-800">The <code>IRCConnection</code> Class (Network I/O)</h3>
                    <p class="mt-3 text-stone-600">This class manages the asynchronous socket connection, handles raw reading and writing of IRC data, and buffers messages using <code>asyncio</code> streams.</p>

                    <h4 class="mt-8 mb-4 font-semibold text-stone-800">Constructor Arguments (<code>__init__</code>)</h4>
                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Argument</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                    <th class="p-4 font-semibold text-sm">Required</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">host</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The IRC server hostname or IP address.</td><td class="p-4 font-mono text-sm text-green-700">Yes</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">port</td><td class="p-4 font-mono text-sm">int</td><td class="p-4 text-sm text-stone-600">The IRC server port (usually <code>6667</code>).</td><td class="p-4 font-mono text-sm text-green-700">Yes</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">logger</td><td class="p-4 font-mono text-sm">Optional[Logger]</td><td class="p-4 text-sm text-stone-600">A <code>Logger</code> instance for logging network events. If <code>None</code>, a silent logger is used. (Default: <code>None</code>)</td><td class="p-4 font-mono text-sm text-red-700">No</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h4 class="mt-8 mb-4 font-semibold text-stone-800">Key Methods</h4>
                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Method</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">connect()</td><td class="p-4 font-mono text-sm">async method</td><td class="p-4 text-sm text-stone-600">Establishes the socket connection to the IRC server.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">send_raw(message)</td><td class="p-4 font-mono text-sm">async method</td><td class="p-4 text-sm text-stone-600">Sends a raw IRC protocol message line to the server.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">read_line()</td><td class="p-4 font-mono text-sm">async method</td><td class="p-4 text-sm text-stone-600">Asynchronously reads a single, stripped line from the server. Returns <code>None</code> on connection close.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">close()</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Closes the network connection writer and updates state.</td></tr>
                             </tbody>
                        </table>
                    </div>
                </section>

                <section id="logger-class" class="pt-2 -mt-2">
                    <h3 class="text-xl font-semibold text-stone-800">The <code>Logger</code> Class (Logging Utility)</h3>
                    <p class="mt-3 text-stone-600">A utility class for structured logging output to the console and an optional file, with filtering based on configurable log levels.</p>

                    <h4 class="mt-8 mb-4 font-semibold text-stone-800">Constructor Arguments (<code>__init__</code>)</h4>
                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Argument</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                    <th class="p-4 font-semibold text-sm">Default</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">file_path</td><td class="p-4 font-mono text-sm">Optional[str]</td><td class="p-4 text-sm text-stone-600">Path to the log file. If provided, all logs are appended to this file.</td><td class="p-4 font-mono text-sm text-red-700"><code>None</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">min_level</td><td class="p-4 font-mono text-sm">int (LogLevel)</td><td class="p-4 text-sm text-stone-600">The minimum log level (e.g., <code>LogLevel.INFO</code>) required for a message to be outputted.</td><td class="p-4 font-mono text-sm text-red-700"><code>LogLevel.INFO</code></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h4 class="mt-8 mb-4 font-semibold text-stone-800">Logging Methods</h4>
                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Method</th>
                                    <th class="p-4 font-semibold text-sm">Log Level</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">debug(...)</td><td class="p-4 font-mono text-sm">DEBUG (10)</td><td class="p-4 text-sm text-stone-600">For fine-grained debugging information, including raw network traffic.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">info(...)</td><td class="p-4 font-mono text-sm">INFO (20)</td><td class="p-4 text-sm text-stone-600">For standard confirmation messages and general bot state changes.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">error(...)</td><td class="p-4 font-mono text-sm">ERROR (40)</td><td class="p-4 text-sm text-stone-600">For critical, non-fatal errors that prevent certain operations.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">raw_recv(line)</td><td class="p-4 font-mono text-sm">DEBUG (10)</td><td class="p-4 text-sm text-stone-600">Specifically logs a raw line received from the IRC server.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">raw_send(message)</td><td class="p-4 font-mono text-sm">DEBUG (10)</td><td class="p-4 text-sm text-stone-600">Specifically logs a raw message being sent to the IRC server.</td></tr>
                             </tbody>
                        </table>
                    </div>

                    <h4 class="mt-8 mb-4 font-semibold text-stone-800">Logging Constants: <code>LogLevel</code> and <code>LOG_PREFIX</code></h4>

                    <h5 class="mt-4 font-medium text-stone-700">The <code>LogLevel</code> Class</h5>
                    <p class="mt-2 text-sm text-stone-600">Defines standard logging levels used for filtering output verbosity in the <code>Logger</code>.</p>
                    <div class="mt-4 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Constant</th>
                                    <th class="p-4 font-semibold text-sm">Value</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">DEBUG</td><td class="p-4 font-mono text-sm">10</td><td class="p-4 text-sm text-stone-600">The lowest level; typically includes all raw network I/O.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">INFO</td><td class="p-4 font-mono text-sm">20</td><td class="p-4 text-sm text-stone-600">Standard status messages and successful operations.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">ERROR</td><td class="p-4 font-mono text-sm">40</td><td class="p-4 text-sm text-stone-600">Critical failures or issues preventing core functionality.</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <h5 class="mt-8 font-medium text-stone-700">The <code>LOG_PREFIX</code> Dictionary</h5>
                    <p class="mt-2 text-sm text-stone-600">A dictionary mapping log categories to short prefixes for organized, human-readable log output.</p>
                    <div class="mt-4 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Key</th>
                                    <th class="p-4 font-semibold text-sm">Prefix</th>
                                    <th class="p-4 font-semibold text-sm">Category</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">"NET"</td><td class="p-4 font-mono text-sm">"[NET]"</td><td class="p-4 text-sm text-stone-600">Network connection status and disconnects.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">"ERROR"</td><td class="p-4 font-mono text-sm">"[ERROR]"</td><td class="p-4 text-sm text-stone-600">Errors caught during processing.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">"RAW"</td><td class="p-4 font-mono text-sm">"[RAW]"</td><td class="p-4 text-sm text-stone-600">Unfiltered, raw IRC lines (typically DEBUG level).</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">"DISPATCH"</td><td class="p-4 font-mono text-sm">"[DISPATCH]"</td><td class="p-4 text-sm text-stone-600">Event and command handler dispatch actions.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">"TASK"</td><td class="p-4 font-mono text-sm">"[TASK]"</td><td class="p-4 text-sm text-stone-600">Background task lifecycle events.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">"CORE"</td><td class="p-4 font-mono text-sm">"[CORE]"</td><td class="p-4 text-sm text-stone-600">Bot internal state changes (e.g., registration).</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">"USER"</td><td class="p-4 font-mono text-sm">"[USER]"</td><td class="p-4 text-sm text-stone-600">User events like JOIN/PART/QUIT.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">"COMMAND"</td><td class="p-4 font-mono text-sm">"[COMMAND]"</td><td class="p-4 text-sm text-stone-600">When a user executes a command.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <section id="context-class" class="pt-2 -mt-2">
                     <h3 class="text-xl font-semibold text-stone-800">The <code>Context</code> Class (The Data Carrier)</h3>
                     <p class="mt-3 text-stone-600">An object passed to all command and event handlers. It contains the message payload, high-level response methods, and access to channel and user objects.</p>
                     <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Attribute</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">author</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">Nickname of the user who triggered the event.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">target</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">Destination where the bot should reply.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">message</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The full raw message text received.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">command_name</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The invoked command name (only for standard/prefix commands).</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">arg</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The full argument string following the command/prefix.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">args</td><td class="p-4 font-mono text-sm">List[str]</td><td class="p-4 text-sm text-stone-600">The arguments split by whitespace.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">full_line</td><td class="p-4 font-mono text-sm">str</td><td class="p-4 text-sm text-stone-600">The complete, raw IRC line from the server (used primarily with <code>@bot.on_raw</code>).</td></tr>
                             </tbody>
                        </table>
                    </div>
                    <h4 class="mt-8 mb-4 font-semibold text-stone-800">Response and Interaction Methods</h4>
                    <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Method / Property</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                    <th class="p-4 font-semibold text-sm">Example</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">send(text)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Sends a message to <code>ctx.target</code>.</td><td class="p-4 font-mono text-sm text-sky-700"><code>ctx.send("Reply in channel.")</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">reply(text)</td><td class="p-4 font-mono text-sm">async method</td><td class="p-4 text-sm text-stone-600">Alias for <code>send()</code> for improved readability.</td><td class="p-4 font-mono text-sm text-sky-700"><code>await ctx.reply("Confirmation received.")</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">author_obj</td><td class="p-4 font-mono text-sm">property (Member)</td><td class="p-4 text-sm text-stone-600">Returns a <code>Member</code> object for the message author.</td><td class="p-4 font-mono text-sm text-sky-700"><code>ctx.author_obj.send("Sent privately.")</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">channel_obj</td><td class="p-4 font-mono text-sm">property (Channel)</td><td class="p-4 text-sm text-stone-600">Returns a <code>Channel</code> object representing the target of the message.</td><td class="p-4 font-mono text-sm text-sky-700"><code>ctx.channel_obj.unban('BadUser')</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">get_member(nick)</td><td class="p-4 font-mono text-sm">method (Member)</td><td class="p-4 text-sm text-stone-600">Retrieves a <code>Member</code> object for any specified nickname.</td><td class="p-4 font-mono text-sm text-sky-700"><code>ctx.get_member('Admin')</code></td></tr>
                                <tr><td class="p-4 font-mono text-sm">unban(target_user)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Removes ban for a <code>target_user</code> from the current <code>ctx.target</code> channel.</td><td class="p-4 font-mono text-sm text-sky-700"><code>ctx.unban('BannedUser')</code></td></tr>
                             </tbody>
                        </table>
                    </div>
                </section>

                 <section id="member-class" class="pt-2 -mt-2">
                     <h3 class="text-xl font-semibold text-stone-800">The <code>Member</code> Class (User Interaction & Moderation)</h3>
                     <p class="mt-3 text-stone-600">A utility class representing a user, focused on private communication and moderator actions.</p>
                     <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Method</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                    <th class="p-4 font-semibold text-sm">Example</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">send(text)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Sends a direct private message (PRIVMSG) to the member's nickname.</td><td class="p-4 font-mono text-sm text-sky-700"><code>user.send("Your query is complete.")</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">kick(channel, reason)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Kicks the member from the specified <code>channel</code>.</td><td class="p-4 font-mono text-sm text-sky-700"><code>user.kick('#general', 'Spam')</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">ban(channel, reason)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Bans the member's hostmask from the specified <code>channel</code>.</td><td class="p-4 font-mono text-sm text-sky-700"><code>user.ban('#general', 'Flood')</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">mute(channel)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Mutes the member (server-side mute/voice removal in channel).</td><td class="p-4 font-mono text-sm text-sky-700"><code>user.mute('#general')</code></td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">unmute(channel)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Unmutes the member.</td><td class="p-4 font-mono text-sm text-sky-700"><code>user.unmute('#general')</code></td></tr>
                                <tr><td class="p-4 font-mono text-sm">is_muted(channel)</td><td class="p-4 font-mono text-sm">method (bool)</td><td class="p-4 text-sm text-stone-600">Checks the local cache if the user is currently muted/voiced down in the channel.</td><td class="p-4 font-mono text-sm text-sky-700"><code>if user.is_muted('#general'): ...</code></td></tr>
                             </tbody>
                        </table>
                    </div>
                </section>

                 <section id="channel-class" class="pt-2 -mt-2">
                     <h3 class="text-xl font-semibold text-stone-800">The <code>Channel</code> Class (Target Abstraction)</h3>
                     <p class="mt-3 text-stone-600">A class representing an IRC channel, providing methods for channel-specific management.</p>
                     <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Method</th>
                                    <th class="p-4 font-semibold text-sm">Type</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">get_topic()</td><td class="p-4 font-mono text-sm">method (str)</td><td class="p-4 text-sm text-stone-600">Returns the current topic of the channel.</td></tr>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">set_topic(new_topic)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Sets a new topic for the channel.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">unban(user_mask)</td><td class="p-4 font-mono text-sm">method</td><td class="p-4 text-sm text-stone-600">Removes a ban by <code>user_mask</code> (e.g., <code>*!*@host</code>).</td></tr>
                             </tbody>
                        </table>
                    </div>
                </section>

                <section id="task-runner" class="pt-2 -mt-2">
                     <h3 class="text-xl font-semibold text-stone-800">Asynchronous Task Runner</h3>
                     <p class="mt-3 text-stone-600">The framework includes a simple mechanism for defining and running background, repeating asynchronous tasks without blocking the main event loop. **Tasks must be explicitly started using <code>bot.start_task(...)</code>, usually within an <code>@bot.on_ready()</code> handler.**</p>
                     <h4 class="mt-8 mb-4 font-semibold text-stone-800">Task Definition and Control</h4>
                     <div class="mt-6 overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                             <thead class="border-b bg-stone-100">
                                <tr>
                                    <th class="p-4 font-semibold text-sm">Decorator / Method</th>
                                    <th class="p-4 font-semibold text-sm">Parameters</th>
                                    <th class="p-4 font-semibold text-sm">Description</th>
                                </tr>
                            </thead>
                             <tbody>
                                <tr class="border-b"><td class="p-4 font-mono text-sm">@bot.task(...)</td><td class="p-4 font-mono text-sm"><code>interval</code> (float), <code>max_repeat</code> (int, optional)</td><td class="p-4 text-sm text-stone-600">Decorator to mark an <code>async</code> function as a repeating task. <code>max_repeat</code> sets a limit, after which the task stops.</td></tr>
                                <tr><td class="p-4 font-mono text-sm">bot.start_task(func, *args)</td><td class="p-4 font-mono text-sm"><code>task_func</code>, <code>args</code> (optional)</td><td class="p-4 text-sm text-stone-600">Initiates the task defined by <code>@bot.task</code>, passing any arguments required by the function.</td></tr>
                             </tbody>
                        </table>
                    </div>
                </section>

                <section id="example-script">
                    <h2 class="text-2xl font-bold text-stone-900">Example Bot Script</h2>
                    <p class="mt-4 text-stone-600">This script demonstrates command handling, prefix commands, asynchronous tasks, and event handlers.</p>
                    <div class="mt-6 bg-stone-800 rounded-lg text-sm code-block">
                        <button class="copy-btn" title="Copy to clipboard" id="copy-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                        </button>
                        <pre class="p-6 text-stone-200 overflow-x-auto"><code id="python-example-code" class="language-python">
from nIRC.irc import Bot, Context, IRCConnection, Logger
from typing import Optional
import asyncio, time

BOT_NICK = "nIRC"
COMMAND_PREFIX = "!"
CHANNELS_TO_JOIN = {
    "#chat": None,
    "#logs": None,
}
SERVER = "127.0.0.1"
PORT = 6667
SERVER_PASSWORD: Optional[str] = None

@Bot.prefix_command(">")
async def ai_query_command(ctx: Context):
    """
    Fires on any message starting with '>' (e.g., >what is my status).
    This is great for clean, non-standard bot interactions.
    """
    if ctx.arg:
        response = f"AI Service received query from {ctx.author}: '{ctx.arg}'. Processing..."
        await ctx.reply(response)
        await ctx.send(str(ctx.args))
        await ctx.send(str(ctx.full_line))
    else:
        await ctx.reply("Please provide a query after the '>'.")

@Bot.command("calc")
async def calculate_command(ctx: Context):
    """
    Demonstrates using ctx.arg and ctx.args.
    A simplified math evaluator.
    """
    if not ctx.arg:
        await ctx.reply("Usage: !calc <expression> (e.g., 5 + 3 * 2)")
        return

    try:
        # Warning: Using eval() is generally unsafe in production bots.
        # This is for demonstration purposes only.
        result = eval(ctx.arg)
        await ctx.reply(f"Result for '{ctx.arg}': {result}")
    except Exception:
        await ctx.reply(f"Could not calculate the expression: {ctx.arg}")

@Bot.command("mod")
async def mod_command(ctx: Context):
    """
    Handles moderation actions using Member and Channel abstractions.
    Usage: !mod <action> <target> [reason/value]
    """
    if len(ctx.args) < 2:
        await ctx.reply("Usage: !mod <kick|ban|topic|unban> <target> [value]")
        return

    action = ctx.args[0].lower()
    target_nick_or_mask = ctx.args[1]
    value_or_reason = " ".join(ctx.args[2:]) or "No reason provided."

    if action == "kick":
        member = ctx.get_member(target_nick_or_mask)
        await member.kick(ctx.target, value_or_reason)
        await ctx.reply(f"Attempted to kick {target_nick_or_mask} from {ctx.target}.")

    elif action == "ban":
        member = ctx.get_member(target_nick_or_mask)
        await member.ban(ctx.target, value_or_reason)
        await ctx.reply(f"Attempted to ban and kick {target_nick_or_mask} from {ctx.target}.")

    elif action == "topic" and ctx.target.startswith('#'):
        await ctx.channel_obj.set_topic(value_or_reason)
        await ctx.reply(f"New topic set to: {value_or_reason}")

    elif action == "unban" and ctx.target.startswith('#'):
        await ctx.channel_obj.unban(target_nick_or_mask)
        await ctx.reply(f"Attempted to remove ban mask: {target_nick_or_mask}")

    else:
        await ctx.reply(f"Unknown moderation action: {action}. Use kick, ban, topic, or unban.")

@Bot.command("pmuser")
async def pm_user_command(ctx: Context):
    """Sends a private message to a specified user."""
    if len(ctx.args) < 2:
        await ctx.reply("Usage: !pmuser <nick> <message...>")
        return

    recipient_nick = ctx.args[0]
    message_text = " ".join(ctx.args[1:])

    await ctx._bot.send_message(recipient_nick, f"PM from {ctx.author}: {message_text}")
    await ctx.reply(f"PM sent to {recipient_nick}.")

@Bot.on_message()
async def keyword_responder(ctx: Context):
    """Responds to specific keywords in a channel message."""
    message = ctx.message.lower()
    if "nirc status" in message.lower():
        await ctx.reply(f"I am nIRC exampleBot, running on {SERVER}. My command prefix is '{COMMAND_PREFIX}'.")
    elif "help" == message.strip().lower():
        await ctx.reply(f"Available commands: !calc, !mod, !pmuser. See console for raw logs (type ERROR).")

@Bot.on_join()
async def greet_joiner(ctx: Context):
    """Sends a friendly greeting when a new user joins."""
    if ctx.author != BOT_NICK:
        await ctx.reply(f"Welcome, {ctx.author}! Type '{COMMAND_PREFIX}calc 1+1' to test a command.")

@Bot.on_raw()
async def raw_logger(ctx: Context):
    """Logs the raw line to the console (for demonstration only, triggers on all lines)."""
    if "ERROR" in ctx.full_line or "NOTICE" in ctx.full_line:
        print(f"[RAW LOG] IMPORTANT LINE: {ctx.full_line}")

@Bot.task(interval=10, max_repeat=5)
async def status_announcement(bot_instance: Bot, channel_name: str):
    """
    A non-blocking task that posts a system status message to the #logs channel.
    Shows the power of context-free scheduled actions.
    """
    count = status_announcement.current_repeat

    await bot_instance.send_message(
        channel_name,
        f"[HEARTBEAT] Task iteration {count}/5. Time: {time.strftime('%H:%M:%S')}. (Interval: 10s)"
    )

@Bot.on_ready()
async def initialization_setup(bot: Bot):
    """
    Runs once after connection and IRC registration is complete (after 376).
    Starts tasks and can perform one-time setup actions.
    """
    print("[NET] Running specialized initialization setup.")

    if "#logs" in bot.channel_map:
        bot.start_task(status_announcement, "#logs")
    else:
        print("[WARN] #logs channel not configured. Heartbeat task skipped.")

    if "#chat" in bot.channel_map:
        await bot.conn.send_raw(f"MODE #chat +m")
        print("[NET] Set +m (moderated) on #chat as an example one-time setup.")


async def run_bot():
    """Main entry point to initialize and run the bot."""
    logger= Logger(file_path= "log.txt", min_level= 0)

    irc_connection = IRCConnection(SERVER, PORT, logger)

    bot = Bot(
        prefix=COMMAND_PREFIX,
        conn=irc_connection,
        nick=BOT_NICK,
        username="nirc_bot",
        realname="neko IRC bot framework example client",
        password=SERVER_PASSWORD
    )

    try:
        await bot.start(CHANNELS_TO_JOIN)
    except Exception as e:
        print(f"FATAL BOT ERROR: {e}")
    finally:
        irc_connection.close()

if __name__ == "__main__":
    print("--- Starting Live Asynchronous nIRC Bot Framework Example ---")
    print(f"Connecting as NICK: {BOT_NICK} to {SERVER}:{PORT}")
    print(f"Channels configured: {', '.join(CHANNELS_TO_JOIN.keys())}")

    try:
        asyncio.run(run_bot())
    except KeyboardInterrupt:
        print("\n[BOT] Shutting down gracefully via Ctrl+C.")
    except RuntimeError as e:
        if "cannot run" in str(e):
            print("\n[ERROR] Event loop error. If running in an interactive session, this is normal.")
        else:
            raise
</code></pre>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('#main-nav a');
            const sections = document.querySelectorAll('main section');
            const codeBlockElement = document.getElementById('python-example-code');
            const copyButton = document.getElementById('copy-button');

            // 1. Update Copy Button logic to copy the raw content of the <pre> block
            copyButton.addEventListener('click', () => {
                // Read the static text content
                const rawCodeText = codeBlockElement.textContent;

                // Convert HTML entities (&lt; and &gt;) back to characters for runnable code
                const codeToCopy = rawCodeText
                    .replace(/&lt;/g, '<')
                    .replace(/&gt;/g, '>');

                navigator.clipboard.writeText(codeToCopy.trim()).then(() => {
                    const originalContent = copyButton.innerHTML;
                    copyButton.innerHTML = 'Copied!';
                    setTimeout(() => {
                       copyButton.innerHTML = originalContent;
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                });
            });


            // 2. Navigation Intersection Observer (for active state highlighting)
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.3
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.remove('active-nav');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active-nav');
                            }
                            // Special handling for nested links
                            if (['bot-class', 'irc-connection-class', 'logger-class', 'context-class', 'member-class', 'channel-class', 'task-runner'].includes(id)) {
                                document.querySelector('a[href="#abstractions"]').classList.add('active-nav');
                            }
                        });
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });
        });
    </script>
</body>
</html>
